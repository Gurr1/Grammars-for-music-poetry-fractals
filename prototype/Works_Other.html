<!DOCTYPE html>
<html>
  <head>
    <script
      src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"
      type="text/javascript"
    ></script>
    <script
      src="http://www.skulpt.org/static/skulpt.min.js"
      type="text/javascript"
    ></script>
    <script
      src="http://www.skulpt.org/static/skulpt-stdlib.js"
      type="text/javascript"
    ></script>
  </head>
  <head>
    <svg class="piano" height="230" width="1000">
      <polygon
        points="200,10 230,10 230,100 245,100 245,220 200,220 200,10"
        class="white"
        datakey="65"
        onclick="play('c')"
      />

      <polygon
        points="245,100 260,100 260,10 275,10 275,100 290,100 290,220 245,220 245,100"
        class="white"
        datakey="83"
        onclick="play('d')"
      />

      <polygon
        points="305,10 335,10 335,220 290,220 290,100 305,100 305,10"
        class="white"
        datakey="68"
        onclick="play('e')"
      />

      <polygon
        points="335,10 365,10 365,100 380,100 380,220 335,220 335,10"
        class="white"
        datakey="70"
        onclick="play('f')"
      />

      <polygon
        points="380,100 395,100 395,10 410,10 410,100 425,100 425,220 380,220 380,100"
        class="white"
        datakey="71"
        onclick="play('g')"
      />

      <polygon
        points="425,100 440,100 440,10 455,10 455,100 470,100 470,220 425,220 425,100"
        class="white"
        datakey="72"
        onclick="play('a')"
      />

      <polygon
        points="470,100 485,100 485,10 515,10 515,220 470,220 470,100"
        class="white"
        datakey="74"
        onclick="play('b')"
      />

      <polygon
        points="515,10 545,10 545,100 560,100 560,220 515,220 515,10"
        class="white"
        datakey="82"
        onclick="play('highc')"
      />

      <polygon
        points="560,100 575,100 575,10 590,10 590,100 605,100 605,220 560,220"
        class="white"
        datakey="84"
        onclick="play('highd')"
      />

      <polygon
        points="605,100 620,100 620,10 650,10 650,220 605,220 605,100"
        class="white"
        datakey="89"
        onclick="play('highe')"
      />

      <polygon
        points="650,10 680,10 680,100 695,100 695,220 650,220 650,10"
        class="white"
        datakey="85"
        onclick="play('highf')"
      />

      <polygon
        points="695,100 710,100 710,10 725,10 725,100 740,100 740,220 695,220 695,100"
        class="white"
        datakey="73"
        onclick="play('highg')"
      />

      <polygon
        points="740,100 755,100 755,10 770,10 770,100 785,100 785,220 740,220 740,100"
        class="white"
        datakey="79"
        onclick="play('higha')"
      />

      <polygon
        points="785,100 800,100 800,10 830,10 830,220 785,220 785,100"
        class="white"
        datakey="80"
        onclick="play('highb')"
      />

      <polygon
        points="230,10 260,10 260,100 230,100 230,10"
        class="black"
        datakey="49"
        onclick="play('c#')"
      />

      <polygon
        points="275,10 305,10 305,100 275,100 275,10"
        class="black"
        datakey="50"
        onclick="play('d#')"
      />

      <polygon
        points="365,10 395,10 395,100 365,100 365,10"
        class="black"
        datakey="51"
        onclick="play('f#')"
      />

      <polygon
        points="410,10 440,10 440,100 410,100 410,10"
        class="black"
        datakey="52"
        onclick="play('g#')"
      />

      <polygon
        points="455,10 485,10 485,100 455,100 455,10"
        class="black"
        datakey="53"
        onclick="play('a#')"
      />

      <polygon
        points="545,10 575,10 575,100 545,100 545,10"
        class="black"
        datakey="54"
        onclick="play('highc#')"
      />

      <polygon
        points="590,10 620,10 620,100 590,100 590,10"
        class="black"
        datakey="55"
        onclick="play('highd#')"
      />

      <polygon
        points="680,10 710,10 710,100 680,100 680,10"
        class="black"
        datakey="56"
        onclick="play('highf#')"
      />

      <polygon
        points="725,10 755,10 755,100 725,100 725,10"
        class="black"
        datakey="57"
        onclick="play('highg#')"
      />

      <polygon
        points="770,10 800,10 800,100 770,100 770,10"
        class="black"
        datakey="48"
        onclick="play('higha#')"
      />
    </svg>

    <audio
      datakey="65"
      id="c"
      type="audio/mpeg"
      src="./pianosounds/middle_c.mp3"
    ></audio>

    <audio datakey="49" id="c#" src="./pianosounds/mid_c_sharp.mp3"></audio>

    <audio datakey="83" id="d" src="./pianosounds/middle_d.mp3"></audio>

    <audio datakey="50" id="d#" src="./pianosounds/mid_d_sharp.mp3"></audio>

    <audio datakey="68" id="e" src="./pianosounds/middle_e.mp3"></audio>

    <audio datakey="70" id="f" src="./pianosounds/middle_f.mp3"></audio>

    <audio datakey="51" id="f#" src="./pianosounds/mid_f_sharp.mp3"></audio>

    <audio datakey="71" id="g" src="./pianosounds/middle_g.mp3"></audio>

    <audio datakey="52" id="g#" src="./pianosounds/mid_g_sharp.mp3"></audio>

    <audio datakey="72" id="a" src="./pianosounds/middle_a.mp3"></audio>

    <audio datakey="53" id="a#" src="./pianosounds/mid_a_sharp.mp3"></audio>

    <audio datakey="74" id="b" src="./pianosounds/middle_b.mp3"></audio>

    <audio datakey="82" id="highc" src="./pianosounds/high_c.mp3"></audio>

    <audio
      datakey="54"
      id="highc#"
      src="./pianosounds/high_c_sharp.mp3"
    ></audio>

    <audio datakey="84" id="highd" src="./pianosounds/high_d.mp3"></audio>

    <audio
      datakey="55"
      id="highd#"
      src="./pianosounds/high_d_sharp.mp3"
    ></audio>

    <audio datakey="89" id="highe" src="./pianosounds/high_e.mp3"></audio>

    <audio datakey="85" id="highf" src="./pianosounds/high_f.mp3"></audio>

    <audio
      datakey="56"
      id="highf#"
      src="./pianosounds/high_f_sharp.mp3"
    ></audio>

    <audio
      datakey="73"
      id="highg"
      type="audio/mpeg"
      src="./pianosounds/high_g.mp3"
    ></audio>

    <audio
      datakey="57"
      id="highg#"
      src="./pianosounds/high_g_sharp.mp3"
    ></audio>

    <audio
      datakey="79"
      id="higha"
      type="audio/mpeg"
      src="./pianosounds/high_a.mp3"
    ></audio>

    <audio
      datakey="48"
      id="higha#"
      src="./pianosounds/high_a_sharp.mp3"
    ></audio>

    <audio datakey="80" id="highb" src="./pianosounds/high_b.mp3"></audio>
  </head>

  <head>
    <link rel="stylesheet" type="text/css" href="pianostyle.css" />
    <link rel="stylesheet" type="text/css" href="mystyle.css" />
  </head>

  <head>
    <title>Grammar</title>
  </head>

  <body>
    <script type="text/javascript">
      // output functions are configurable.  This one just appends some text
      // to a pre element.
      function outf(text) {
        var mypre = document.getElementById("output");
        mypre.innerHTML = mypre.innerHTML + text;
      }
      function builtinRead(x) {
        if (
          Sk.builtinFiles === undefined ||
          Sk.builtinFiles["files"][x] === undefined
        )
          throw "File not found: '" + x + "'";
        return Sk.builtinFiles["files"][x];
      }
      // Here's everything you need to run a python program in skulpt
      // grab the code from your textarea
      // get a reference to your pre element for output
      // configure the output function
      // call Sk.importMainWithBody()
      function runit() {
        console.log("bajs");
        var prog = document.getElementById("grammarcode").value;
        var mypre = document.getElementById("output");
        mypre.innerHTML = "";
        Sk.pre = "output";
        Sk.configure({ output: outf, read: builtinRead });
        (Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target = "mycanvas";
        Sk.TurtleGraphics.width = 2000;
        Sk.TurtleGraphics.height = 500;
        var myPromise = Sk.misceval.asyncToPromise(function() {
          return Sk.importMainWithBody("<stdin>", false, prog, true);
        });
        myPromise.then(
          function(mod) {
            console.log("success");
          },
          function(err) {
            console.log(err.toString());
          }
        );
      }
    </script>

    <form>
      <textarea id="grammarcode" cols="40" rows="10" style="display:none;">

import turtle

def main():
    notes = input("What notes does your masterpiece start with? Ex: a,b,c: ")
    nmIterations = input("How many iterations?")
    # notes = "a,b,c"
    translateNotes(notes, int(nmIterations))


def translateNotes(notess, iter):
    array = notess.split(",")
    newArray = []
    grammarArray = []
    #print(str(array))
    turns = iter

    if(int(iter) == 1):  # array = ["a"]
        createGrammar(array, newArray)
        turns = turns - 1

    while turns > 0:  # array = ["a", "b"]
        if(int(turns) == int(iter)):
            grammarArray = array
        #print("Går in i createGrammar")
        # första iterationen #newArray = ["AB", "CA"]
        createGrammar(grammarArray, newArray)
        grammarArray = []
        #print("Går in i splitGrammarArray")
        # andra iterationen #grammarArray = ["A", "B", "C", "A"]
        splitGrammarArray(newArray, grammarArray)
        newArray = []
        turns = turns - 1
        # print("The string after round "  + str(turns) + ": " + str(grammarArray))

    #print(str(grammarArray))
    draw(grammarArray)


def splitGrammarArray(arrayStr, grammarArray):
    i = 0
    while i < len(arrayStr):
        a = arrayStr[i]  # t.ex AB
        # förhoppningsvis ["A", "B"] första rundan, ["C", "A"] nästa
        newTempArray = list(a)

        for element in newTempArray:
            # print("Element: " + str(element))
            grammarArray.append(element)  # grammarArray = ["A"]
        # print(str(grammarArray)) # grammarArray = ["A", "B", "C", "A"]
        i = i + 1


def createGrammar(array, array2):
    i = 0
    while i < len(array):
        #print("i and len(array): " + str(i) + str(len(array)))
        note = array[i]

        if(str(note) == "a" or str(note) == "A" or str(note) == "higha"):
            array2.append("AB")
        if(str(note) == "b" or str(note) == "B" or str(note) == "highb"):
            array2.append("BEB")
        if(str(note) == "c" or str(note) == "C" or str(note) == "highc"):
            array2.append("CD")
        if(str(note) == "d" or str(note) == "D" or str(note) == "highd"):
            array2.append("DD")
        if(str(note) == "g" or str(note) == "G" or str(note) == "highg"):
            array2.append("GA")
        if(str(note) == "f" or str(note) == "F" or str(note) == "highf"):
            array2.append("FE")
        if(str(note) == "e" or str(note) == "E" or str(note) == "highe"):
            array2.append("EA")
        if(str(note) == "a#" or str(note) == "A#" or str(note) == "higha#"):
            array2.append("AB")
        if(str(note) == "c#" or str(note) == "C#" or str(note) == "highc#"):
            array2.append("BBABCD")
        if(str(note) == "g#" or str(note) == "G#" or str(note) == "highg#"):
            array2.append("G")
        if(str(note) == "f#" or str(note) == "F#" or str(note) == "highf#"):
            array2.append("FFFCF")
        if(str(note) == "d#" or str(note) == "D#" or str(note) == "highd#"):
            array2.append("D")
        i = i + 1
    # print("newArray after createGrammar: " + str(array2))


def draw(grammarArrayen):
    window = turtle.Screen()
    window.bgcolor("white")
    

    brad = turtle.Turtle()
    brad.hideturtle()
    brad.ht()
    brad.speed(10)
    #brad.penup()                #don't draw when turtle moves
    #brad.goto(-400, 190)       #move the turtle to a location
    #brad.pendown() 

    i = 0

    for note in grammarArrayen:
        if(note == "A"):
            brad.color("red")
            brad.forward(20)
        if(note == "B"):
            brad.color("green")
            brad.right(60)
            brad.forward(20)
        if(note == "C"):
            brad.left(60)
            brad.forward(20)
        if(note == "D"):
            brad.color("yellow")
            brad.left(60)
            brad.forward(20)
        if(note == "E"):
            brad.color("blue")
            brad.forward(20)
        if(note == "F"):
            brad.right(60)
        if(note == "G"):
            brad.forward(20)

    window.exitonclick()


main()


</textarea
      ><br />
    </form>

    <script type="text/javascript" src="playsound.js"></script>
    <h1>YOUR AXIOM NOTES</h1>
    <div class="container">
      <form>
        <input
          autocomplete="off"
          class="notebar"
          type="text"
          name="notes"
          id="noteID"
        /><br />
      </form>
      <button class="mybutton mybutton1" onclick="runit()">
        Run super cool code
      </button>
    </div>
    <pre id="output"></pre>
    <!-- If you want turtle graphics include a canvas -->

    <div id="mycanvas" class="canvas"></div>
  </body>
</html>
