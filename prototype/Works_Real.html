<!DOCTYPE html>
<html>
        <script
        src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"
        type="text/javascript"
      ></script>

</body>

<head>
  <svg class="piano" height="230" width="1000">
    <polygon
      points="200,10 230,10 230,100 245,100 245,220 200,220 200,10"
      class="white"
      datakey="65"
      onclick="play('c')"
    />

    <polygon
      points="245,100 260,100 260,10 275,10 275,100 290,100 290,220 245,220 245,100"
      class="white"
      datakey="83"
      onclick="play('d')"
    />

    <polygon
      points="305,10 335,10 335,220 290,220 290,100 305,100 305,10"
      class="white"
      datakey="68"
      onclick="play('e')"
    />

    <polygon
      points="335,10 365,10 365,100 380,100 380,220 335,220 335,10"
      class="white"
      datakey="70"
      onclick="play('f')"
    />

    <polygon
      points="380,100 395,100 395,10 410,10 410,100 425,100 425,220 380,220 380,100"
      class="white"
      datakey="71"
      onclick="play('g')"
    />

    <polygon
      points="425,100 440,100 440,10 455,10 455,100 470,100 470,220 425,220 425,100"
      class="white"
      datakey="72"
      onclick="play('a')"
    />

    <polygon
      points="470,100 485,100 485,10 515,10 515,220 470,220 470,100"
      class="white"
      datakey="74"
      onclick="play('b')"
    />

    <polygon
      points="515,10 545,10 545,100 560,100 560,220 515,220 515,10"
      class="white"
      datakey="82"
      onclick="play('highc')"
    />

    <polygon
      points="560,100 575,100 575,10 590,10 590,100 605,100 605,220 560,220"
      class="white"
      datakey="84"
      onclick="play('highd')"
    />

    <polygon
      points="605,100 620,100 620,10 650,10 650,220 605,220 605,100"
      class="white"
      datakey="89"
      onclick="play('highe')"
    />

    <polygon
      points="650,10 680,10 680,100 695,100 695,220 650,220 650,10"
      class="white"
      datakey="85"
      onclick="play('highf')"
    />

    <polygon
      points="695,100 710,100 710,10 725,10 725,100 740,100 740,220 695,220 695,100"
      class="white"
      datakey="73"
      onclick="play('highg')"
    />

    <polygon
      points="740,100 755,100 755,10 770,10 770,100 785,100 785,220 740,220 740,100"
      class="white"
      datakey="79"
      onclick="play('higha')"
    />

    <polygon
      points="785,100 800,100 800,10 830,10 830,220 785,220 785,100"
      class="white"
      datakey="80"
      onclick="play('highb')"
    />

    <polygon
      points="230,10 260,10 260,100 230,100 230,10"
      class="black"
      datakey="49"
      onclick="play('c#')"
    />

    <polygon
      points="275,10 305,10 305,100 275,100 275,10"
      class="black"
      datakey="50"
      onclick="play('d#')"
    />

    <polygon
      points="365,10 395,10 395,100 365,100 365,10"
      class="black"
      datakey="51"
      onclick="play('f#')"
    />

    <polygon
      points="410,10 440,10 440,100 410,100 410,10"
      class="black"
      datakey="52"
      onclick="play('g#')"
    />

    <polygon
      points="455,10 485,10 485,100 455,100 455,10"
      class="black"
      datakey="53"
      onclick="play('a#')"
    />

    <polygon
      points="545,10 575,10 575,100 545,100 545,10"
      class="black"
      datakey="54"
      onclick="play('highc#')"
    />

    <polygon
      points="590,10 620,10 620,100 590,100 590,10"
      class="black"
      datakey="55"
      onclick="play('highd#')"
    />

    <polygon
      points="680,10 710,10 710,100 680,100 680,10"
      class="black"
      datakey="56"
      onclick="play('highf#')"
    />

    <polygon
      points="725,10 755,10 755,100 725,100 725,10"
      class="black"
      datakey="57"
      onclick="play('highg#')"
    />

    <polygon
      points="770,10 800,10 800,100 770,100 770,10"
      class="black"
      datakey="48"
      onclick="play('higha#')"
    />
  </svg>

  <audio
    datakey="65"
    id="c"
    type="audio/mpeg"
    src="./pianosounds/middle_c.mp3"
  ></audio>

  <audio datakey="49" id="c#" src="./pianosounds/mid_c_sharp.mp3"></audio>

  <audio datakey="83" id="d" src="./pianosounds/middle_d.mp3"></audio>

  <audio datakey="50" id="d#" src="./pianosounds/mid_d_sharp.mp3"></audio>

  <audio datakey="68" id="e" src="./pianosounds/middle_e.mp3"></audio>

  <audio datakey="70" id="f" src="./pianosounds/middle_f.mp3"></audio>

  <audio datakey="51" id="f#" src="./pianosounds/mid_f_sharp.mp3"></audio>

  <audio datakey="71" id="g" src="./pianosounds/middle_g.mp3"></audio>

  <audio datakey="52" id="g#" src="./pianosounds/mid_g_sharp.mp3"></audio>

  <audio datakey="72" id="a" src="./pianosounds/middle_a.mp3"></audio>

  <audio datakey="53" id="a#" src="./pianosounds/mid_a_sharp.mp3"></audio>

  <audio datakey="74" id="b" src="./pianosounds/middle_b.mp3"></audio>

  <audio datakey="82" id="highc" src="./pianosounds/high_c.mp3"></audio>

  <audio
    datakey="54"
    id="highc#"
    src="./pianosounds/high_c_sharp.mp3"
  ></audio>

  <audio datakey="84" id="highd" src="./pianosounds/high_d.mp3"></audio>

  <audio
    datakey="55"
    id="highd#"
    src="./pianosounds/high_d_sharp.mp3"
  ></audio>

  <audio datakey="89" id="highe" src="./pianosounds/high_e.mp3"></audio>

  <audio datakey="85" id="highf" src="./pianosounds/high_f.mp3"></audio>

  <audio
    datakey="56"
    id="highf#"
    src="./pianosounds/high_f_sharp.mp3"
  ></audio>

  <audio
    datakey="73"
    id="highg"
    type="audio/mpeg"
    src="./pianosounds/high_g.mp3"
  ></audio>

  <audio
    datakey="57"
    id="highg#"
    src="./pianosounds/high_g_sharp.mp3"
  ></audio>

  <audio
    datakey="79"
    id="higha"
    type="audio/mpeg"
    src="./pianosounds/high_a.mp3"
  ></audio>

  <audio
    datakey="48"
    id="higha#"
    src="./pianosounds/high_a_sharp.mp3"
  ></audio>

  <audio datakey="80" id="highb" src="./pianosounds/high_b.mp3"></audio>
</head>

<head>
        <script
        src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.7.0/brython.min.js">
        type="text/javascript"
      ></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.7.0/brython_stdlib.js"></script>
      
</head>

<head>
  <link rel="stylesheet" type="text/css" href="pianostyle.css" />
  <link rel="stylesheet" type="text/css" href="mystyle.css" />
</head>

    <body onload="brython()">
    <script
      type="text/python"
    >
    from browser import document, html
    import turtle

    def get_values_from_form(event):
      inputN = document["noteID"].value
      inputI = document["iterID"].value
      print(str(inputN) + str(inputI))

      main(inputN, inputI)

    document["button1"].bind("click", get_values_from_form)

    turtle.set_defaults(
    turtle_canvas_wrapper = document['turtle-div'])

    
    def main(notes, iterations):
      #print("is in main!: " + str(notes) + str(iterations))
      translateNotes(notes, int(iterations))
      
    def translateNotes(notess, iter):
      #print("is in translatenotes!: " + str(notess) + str(iter))
      array = notess.split(",")
      print(str(array))
      newArray = []
      grammarArray = []
      turns = iter

      if(int(iter) == 1):
        createGrammar(array, newArray)
        turns = turns - 1

      while turns > 0:  # array = ["a", "b"]
          if(int(turns) == int(iter)):
              grammarArray = array
          createGrammar(grammarArray, newArray)
          grammarArray = []
          splitGrammarArray(newArray, grammarArray)
          newArray = []
          turns = turns - 1

      go_turtle(grammarArray)

    def splitGrammarArray(arrayStr, grammarArray):
      #print("is in splitgrammararray!")
      i = 0
      while i < len(arrayStr):
          a = arrayStr[i]  
          newTempArray = list(a)
          for element in newTempArray:
              grammarArray.append(element)  # grammarArray = ["A"]
          i = i + 1
    
    def createGrammar(array, array2):
      #print("is in creategrammar!")
      i = 0
      while i < len(array):
        note = array[i]

        if(str(note) == "a" or str(note) == "A" or str(note) == "higha"):
            array2.append("AB")
        if(str(note) == "b" or str(note) == "B" or str(note) == "highb"):
            array2.append("BEB")
        if(str(note) == "c" or str(note) == "C" or str(note) == "highc"):
            array2.append("CD")
        if(str(note) == "d" or str(note) == "D" or str(note) == "highd"):
            array2.append("DD")
        if(str(note) == "g" or str(note) == "G" or str(note) == "highg"):
            array2.append("GA")
        if(str(note) == "f" or str(note) == "F" or str(note) == "highf"):
            array2.append("FE")
        if(str(note) == "e" or str(note) == "E" or str(note) == "highe"):
            array2.append("EA")
        if(str(note) == "a#" or str(note) == "A#" or str(note) == "higha#"):
            array2.append("AB")
        if(str(note) == "c#" or str(note) == "C#" or str(note) == "highc#"):
            array2.append("BBABCD")
        if(str(note) == "g#" or str(note) == "G#" or str(note) == "highg#"):
            array2.append("G")
        if(str(note) == "f#" or str(note) == "F#" or str(note) == "highf#"):
            array2.append("FFFCF")
        if(str(note) == "d#" or str(note) == "D#" or str(note) == "highd#"):
            array2.append("D")
        i = i + 1

    def go_turtle(grammarArrayen):
      print("doing the turtle")

      brad = turtle.Turtle()
      brad.hideturtle()
      brad.ht()
      brad.speed(10)
      #brad.penup()                #don't draw when turtle moves
      #brad.goto(-400, 190)       #move the turtle to a location
      #brad.pendown() 
    
      for note in grammarArrayen:
          if(note == "A"):
              brad.color("red")
              brad.forward(20)
          if(note == "B"):
              brad.color("green")
              brad.right(60)
              brad.forward(20)
          if(note == "C"):
              brad.left(60)
              brad.forward(20)
          if(note == "D"):
              brad.color("yellow")
              brad.left(60)
              brad.forward(20)
          if(note == "E"):
              brad.color("blue")
              brad.forward(20)
          if(note == "F"):
              brad.right(60)
          if(note == "G"):
              brad.forward(20)
      turtle.done()
    
    


</script>

</body>
<body>
    <script type="text/javascript" src="playsound.js"></script>
    <h1>MUSIC TO PICTURE</h1>
        <div class="container">
                <form>
                  <input
                    value="notes"
                    autocomplete="off"
                    class="notebar"
                    type="text"
                    name="notes"
                    id="noteID"
                  /><br />
                </form>
                <form>
                  <input
                    value="#iterations"
                    autocomplete="off"
                    class="iterations"
                    type="text"
                    name="iteration"
                    id="iterID"
                  /><br />
                </form>
                <button id="button1" class="mybutton mybutton1" onclick="brython()">
                  Run code
                </button>
              </div>

<div id="turtle-div" style="float:center;border:None; margin-left:auto; margin-right:auto; height: 1000px;"> </div>

</body>
</html>